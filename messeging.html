<!DOCTYPE html>

<html>
  <head> </head>

  <body>
    <div>
      <h2>Alhamdulilah</h2>
      <div
        class="display_message"
        style="border: 1px solid red; width: 350px; height: 150px"
      ></div>

      <form action="#" class="submit">
        <input type="text" placeholder="Enter a Text" class="writeText" />
        <button type="submit">Submit</button>
      </form>
    </div>
    <script>
      const display = document.querySelector(".display_message");
      const form = document.querySelector(".submit");
      const input = document.querySelector(".writeText");
      let id = 1;
      let edittext = null;
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const text = input.value;

        if (edittext) {
          const item = document.getElementById(edittext);
          item.querySelector(".text").innerText = text;
          console.log(item, "edittxt");
          input.value = "";
          edittext = "";
          return;
        }

        // console.log("alhamdulillah", text);

        const html = `<div class="parent" id=${id} style='display:flex'>
      <p class='text'>${text}</p>
      <button class='edit'> Edit</button>
      <button class='delete'> Delete</button>
      </div>`;

        display.insertAdjacentHTML("beforeend", html);
        input.value = "";
        id++;
      });

      // -----Edit / Delete --------

      display.addEventListener("click", function (e) {
        const parentDiv = e.target.parentElement;

        const itemid = parentDiv.getAttribute("id");

        if (e.target.classList.contains("edit")) {
          const oldtext = parentDiv.querySelector(".text").innerText;

          input.value = oldtext;
          edittext = itemid;

          console.log(edittext, "edit id");
        }
        if (e.target.classList.contains("delete")) {
          document.getElementById(itemid).remove();
        }
      });
    </script>
  </body>
</html>
